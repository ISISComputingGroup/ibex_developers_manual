

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Moxa e12xx &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Ocean Optics DH-2000" href="Ocean-Optics-DH-2000-Shutter-control.html" />
    <link rel="prev" title="LSi Correlator" href="LSi-Correlator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Specific-IOCs.html">Specific Devices &amp; IOCs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Cells.html">Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Choppers.html">Choppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Cryogenics.html">Cryogenics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DAE-and-the-ICP.html">DAE (Data Acquisition Electronics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DAQ.html">DAQ (NI cDAQ)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fluxgates.html">Fluxgates &amp; Magnetometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Gas-And-Liquid-Handling-Systems.html">Gas and liquid handling systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Imaging-Cameras.html">Imaging Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Loading-Rigs.html">Loading rigs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Magnets.html">Magnets &amp; Large Power Supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Motors.html">Motors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Motors-Extensions.html">Motor Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Multimeters.html">Multimeters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../Other.html">Other / Miscellaneous</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="AnywhereUSB.html">AnywhereUSB</a></li>
<li class="toctree-l3"><a class="reference internal" href="Arduino-RKNDIO-PLC-control.html">Arduino RKNDIO PLC Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="Background-Script-IOC.html">Background Script IOC</a></li>
<li class="toctree-l3"><a class="reference internal" href="CAEN-Hexagon.html">CAEN Hexagon (MUX Data Acquisition Electronics)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CAEN-v895.html">CAEN v895</a></li>
<li class="toctree-l3"><a class="reference internal" href="Catalytic-Flow-Reactor.html">Catalytic Flow Reactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="Coherent-OBIS-Laser-Remote.html">Coherent OBIS Laser Remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="Ferro-Magnetic_Resonance_equipment.html">Ferro-Magnetic Resonance equipment (FMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Gamry.html">Gamry</a></li>
<li class="toctree-l3"><a class="reference internal" href="Hameg-HM8123.html">Hameg HM8123 programmable counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="Humidity-Controller.html">Humidity Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="Inhibitor.html">Inhibitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="LOTQD-MSH150-Monochromator.html">LOTQD MSH150 Monochromator</a></li>
<li class="toctree-l3"><a class="reference internal" href="LSi-Correlator.html">LSi Correlator</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Moxa e12xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="Ocean-Optics-DH-2000-Shutter-control.html">Ocean Optics DH-2000</a></li>
<li class="toctree-l3"><a class="reference internal" href="RAMAN-Spectrometer.html">RAMAN Spectrometer</a></li>
<li class="toctree-l3"><a class="reference internal" href="Rotating-Stirrer-Rack.html">Rotating Stirrer Rack</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDTest.html">SDTest</a></li>
<li class="toctree-l3"><a class="reference internal" href="SP300-Potentiostat.html">SP300 Potentiostat</a></li>
<li class="toctree-l3"><a class="reference internal" href="Stanford-SR850.html">Stanford SR850 Lock In Amplifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="Thorlabs-FW102C-Filter-Wheel.html">Thorlabs FW102C Filter Wheel</a></li>
<li class="toctree-l3"><a class="reference internal" href="nGEM-detector.html">nGEM Detector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../PLCs.html">PLCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Polarisers-and-Analysers.html">Polarisers &amp; Analysers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Power-Distribution-Unit-%28PDU%29.html">Power distribution units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Power-Supplies.html">Power supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Pressure-Monitors.html">Pressure monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Reflectometry-IOC.html">Reflectometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Rheometers.html">Rheometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sample-Changers.html">Sample Changers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Signal-Generators.html">Signal Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Temperature-Controllers.html">Temperature Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
          <li class="breadcrumb-item"><a href="../Other.html">Other / Miscellaneous</a></li>
      <li class="breadcrumb-item active">Moxa e12xx</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/specific_iocs/other/MOXA-e12XX.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="moxa-e12xx">
<h1>Moxa e12xx<a class="headerlink" href="#moxa-e12xx" title="Link to this heading"></a></h1>
<section id="device-notes">
<h2>Device notes<a class="headerlink" href="#device-notes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The bulk of this driver was written by a third party (original repo <a class="reference external" href="https://gitlab.com/LBCS-ELI-BL/epics-ioc-moxa-e12xx_pub">here</a>). The third party code, extended for the e1210 and minimally modified for use on IBEX lives in the moxa1210 support module.</p></li>
<li><p>The IOC folder for this device contains records to map from the vendor PV naming convention to the IBEX PV conventions.</p>
<ul>
<li><p>The code to assign aliases to channel inputs also lives here and not in the support module to keep the vendor-supplied driver clean.</p></li>
</ul>
</li>
<li><p>I could not get the hardware counter to work</p>
<ul>
<li><p>I used the web interface to change the state of one of the inputs from DI (input mode) to Counter, but this request was rejected by the device <code class="docutils literal notranslate"><span class="pre">&quot;invalid</span> <span class="pre">token&quot;</span></code>.</p></li>
<li><p>PVs exist which <em>should</em> interact with this functionality, but this is not tested as I couldn’t get the device to enter this mode</p></li>
<li><p>The <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/3269">original ticket</a> for this hardware does not require a functional counter, so this hasn’t been taken any further</p></li>
</ul>
</li>
</ul>
</section>
<section id="finding-a-moxa-e1200-series-device-on-the-network">
<h2>Finding a moxa e1200 series device on the network<a class="headerlink" href="#finding-a-moxa-e1200-series-device-on-the-network" title="Link to this heading"></a></h2>
<p>Moxa provides a tool, <code class="docutils literal notranslate"><span class="pre">ioSearch</span></code>, to find 12xx series devices which have DHCP allocated IPs on the network. For this to work you must be using a computer which is on the same subnet as the device. <code class="docutils literal notranslate"><span class="pre">ioSearch</span></code> is found in the manuals share under <code class="docutils literal notranslate"><span class="pre">&lt;manuals</span> <span class="pre">share&gt;\MOXA</span> <span class="pre">E1200</span> <span class="pre">Series\moxa-iologik-e1200-series-iosearch-utility-v2.0.0.zip</span></code>. Extract this file and run the installer. When starting the program, UAC will ask for administrator privileges.</p>
<section id="using-the-ip-locate-tool">
<h3>Using the IP locate tool<a class="headerlink" href="#using-the-ip-locate-tool" title="Link to this heading"></a></h3>
<p>Once loaded, click ‘start search’ in the top-right of the dialogue which opens. This will begin the search for any device on your subnet in the e1200 series. One can target a specific model by deselecting other models.</p>
<p>Once the search is completed, the IP addresses of any devices found will be displayed in the table. To perform another search, click the leftmost icon from the row of icons at the top of the screen. Once you have found the device you are looking for, you may access its web interface either by typing its IP address into a web browser or clicking the device’s name in the list on the left hand side of the screen.</p>
</section>
</section>
<section id="enabling-dhcp">
<h2>Enabling DHCP<a class="headerlink" href="#enabling-dhcp" title="Link to this heading"></a></h2>
<p>By default, the device should be connected using DHCP. If this is not the case, DHCP can be enabled through the device’s web interface. First, go to <code class="docutils literal notranslate"><span class="pre">Network</span> <span class="pre">settings</span> <span class="pre">&gt;</span> <span class="pre">Ethernet</span> <span class="pre">connection</span></code> from the menu in the web interface. Then select DHCP on the IP configuration drop-down box. The default static IP is written on the side of the device.</p>
</section>
<section id="conversion-of-integer-values-to-floating-points">
<h2>Conversion of integer values to floating points<a class="headerlink" href="#conversion-of-integer-values-to-floating-points" title="Link to this heading"></a></h2>
<p>Some models in the ioLogik e12XX line provide floating point values. These include the e1240 which outputs a voltage; and the e1262 which outputs a temperature. These are encoded as unsigned integers in two consecutive registers. To combine these values into one floating point number using python one can follow <a class="reference external" href="https://stackoverflow.com/a/35603706">this stack overflow answer</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>
<span class="n">register_values</span> <span class="o">=</span> <span class="p">(</span><span class="mi">26214</span><span class="p">,</span> <span class="mi">16878</span><span class="p">)</span>
<span class="n">packed_string</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;HH&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">register_values</span><span class="p">)</span> <span class="c1"># HH defines two unsigned ints.</span>
                                                    <span class="c1"># *register_values treats the values as a void</span>
<span class="n">unpacked_float</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="n">packed_string</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unpacked_float</span><span class="p">)</span> <span class="c1"># Value should be 30.5. This is a Celcius measurement taken with an e1262.</span>
</pre></div>
</div>
</section>
<section id="emulation-and-testing">
<h2>Emulation and testing<a class="headerlink" href="#emulation-and-testing" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>This is a modbus device, which adds complications when testing and emulating.</p></li>
<li><p>Recsim is difficult to get working as a modbus device relies on I/O interrupts and AsynInt/AsynFloat types, both of which make it much more difficult to get a record simulation to work. See <a class="reference internal" href="../../iocs/testing/Record-Simulation.html"><span class="doc std std-doc">Record Simulation</span></a></p>
<ul>
<li><p>Therefore, this device has no RECSIM tests.</p></li>
</ul>
</li>
<li><p>There is a crude DEVSIM/lewis emulator, but support for modbus in the lewis framework is minimal.</p>
<ul>
<li><p>The workaround here is to include a line in the modbus interface to allow the device to hook in and access the data banks. See the modbus_interface.py in the moxa e1210 lewis emulator for an example.</p></li>
<li><p>This means that, unlike a stream interface device, the data will be held within the interface.</p></li>
<li><p>Any commands that the device will need to execute will need to be called directly through the backdoor</p></li>
<li><p>These commands will need to access the data through self.interface, rather than accessing the data directly on the device.</p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="LSi-Correlator.html" class="btn btn-neutral float-left" title="LSi Correlator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Ocean-Optics-DH-2000-Shutter-control.html" class="btn btn-neutral float-right" title="Ocean Optics DH-2000" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>