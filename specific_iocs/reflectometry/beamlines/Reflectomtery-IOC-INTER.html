

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reflectometry IOC - INTER &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Reflectometry IOC - POLREF" href="Reflectomtery-IOC-POLREF.html" />
    <link rel="prev" title="Reflectometry IOC - CRISP" href="Reflectomtery-IOC-CRISP.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../Specific-IOCs.html">Specific Devices &amp; IOCs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Cells.html">Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Choppers.html">Choppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cryogenics.html">Cryogenics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DAE-and-the-ICP.html">DAE (Data Acquisition Electronics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DAQ.html">DAQ (NI cDAQ)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Fluxgates.html">Fluxgates &amp; Magnetometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Gas-And-Liquid-Handling-Systems.html">Gas and liquid handling systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Imaging-Cameras.html">Imaging Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Loading-Rigs.html">Loading rigs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Magnets.html">Magnets &amp; Large Power Supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Motors.html">Motors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Motors-Extensions.html">Motor Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Multimeters.html">Multimeters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Other.html">Other / Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../PLCs.html">PLCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Polarisers-and-Analysers.html">Polarisers &amp; Analysers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Power-Distribution-Unit-%28PDU%29.html">Power distribution units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Power-Supplies.html">Power supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Pressure-Monitors.html">Pressure monitors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Reflectometry-IOC.html">Reflectometry</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../Beamlines.html">Beamline-specific information</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Reflectomtery-IOC-CRISP.html">Reflectometry IOC - CRISP</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Reflectometry IOC - INTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="Reflectomtery-IOC-POLREF.html">Reflectometry IOC - POLREF</a></li>
<li class="toctree-l4"><a class="reference internal" href="Reflectomtery-IOC-SURF.html">Reflectometry IOC - SURF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Config-Training.html">Reflectometry Config Training</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Design-Docs.html">Reflectometry Design Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometers-Beam-Height-Calc.html">Beam height calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Alignment.html">Alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Beam-Blocker.html">Beam Blocker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Beamline-Object.html">Beamline object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Beamline-Parameters.html">Beamline Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Composite-Driving-Layer.html">Composite Driving Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Geometry-Components.html">Geometry Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Glossary.html">Glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Testing.html">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Reflectometry-Troubleshooting-and-FAQ.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reflectometry-bench-configuration.html">Bench Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reflectometry_blind_script.html">Blind script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reflectometry_blind_script_output.html">Blind script output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Rheometers.html">Rheometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sample-Changers.html">Sample Changers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Signal-Generators.html">Signal Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Temperature-Controllers.html">Temperature Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
          <li class="breadcrumb-item"><a href="../../Reflectometry-IOC.html">Reflectometry</a></li>
          <li class="breadcrumb-item"><a href="../Beamlines.html">Beamline-specific information</a></li>
      <li class="breadcrumb-item active">Reflectometry IOC - INTER</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/specific_iocs/reflectometry/beamlines/Reflectomtery-IOC-INTER.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="reflectometry-ioc-inter">
<h1>Reflectometry IOC - INTER<a class="headerlink" href="#reflectometry-ioc-inter" title="Link to this heading"></a></h1>
<p>Specific information about INTER.</p>
<section id="mirrors">
<h2>Mirrors<a class="headerlink" href="#mirrors" title="Link to this heading"></a></h2>
<p>Inter is equipped with 2 supermirrors, which may be used in any combination (just <code class="docutils literal notranslate"><span class="pre">SM1</span></code>, just <code class="docutils literal notranslate"><span class="pre">SM2</span></code>, both in, neither in) depending on the experiment. <code class="docutils literal notranslate"><span class="pre">SM2</span></code> also presents a special case for the reflectometry IOC - when it is not used to bounce the beam, it is used as a beam guide. In this configuration the mirror is physically moved out of the beam, but still has to track the beam as reflected by <code class="docutils literal notranslate"><span class="pre">SM1</span></code> at an offset. <code class="docutils literal notranslate"><span class="pre">SM2</span></code> is never in a fixed parked position.</p>
</section>
<section id="axes">
<h2>Axes<a class="headerlink" href="#axes" title="Link to this heading"></a></h2>
<p>The following were unused axes on August 2020:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SM</span> <span class="pre">Trans</span> <span class="pre">Y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FOMS</span> <span class="pre">-</span> <span class="pre">Z2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SM</span> <span class="pre">Angle2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SM2</span> <span class="pre">AngleEnc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Long</span> <span class="pre">travel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PD</span> <span class="pre">Distance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PD2</span> <span class="pre">Angle</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">SM2</span> <span class="pre">AngleEnc</span></code> is the axis which has the SM2 angle encoder connected to enable us to record the encoder and motor position separately.</p>
<p>They don’t currently use the detector z axis so we don’t need to have this in the reflectometry server</p>
</section>
<section id="blocks">
<h2>Blocks<a class="headerlink" href="#blocks" title="Link to this heading"></a></h2>
<p>Blocks that may be confusing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Height</span></code>: Distance from the sample centre of rotation to the sample. This is used to align the sample with the beam.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Height2</span></code>: Distance between the beam and the centre of rotation; usually set a 0. This moves the course z stage tracking the beam.</p></li>
</ul>
</section>
<section id="refl-inter-beam-blocker">
<h2>Slit 3/Beam blocker<a class="headerlink" href="#refl-inter-beam-blocker" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../Reflectometry-Beam-Blocker.html"><span class="doc std std-doc">beam blocker</span></a> on INTER is not setup yet.</p>
</section>
<section id="sample-height-correction">
<h2>Sample height correction<a class="headerlink" href="#sample-height-correction" title="Link to this heading"></a></h2>
<p>INTER has a correction function on sample height which is a fudge factor to account for engineering imperfections in the mirror alignment. <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/6357#issuecomment-844244014">See here</a> for more detail</p>
</section>
<section id="initial-testing">
<h2>Initial Testing<a class="headerlink" href="#initial-testing" title="Link to this heading"></a></h2>
<p>Initial testing on <code class="docutils literal notranslate"><span class="pre">INTER</span></code> was performed from 19 Aug 20 to 21 Aug 20. Tests performed:</p>
<ul class="simple">
<li><p>Correctness of SECI &lt;-&gt; IBEX swap scripts</p></li>
<li><p>Motor setup has been transferred correctly</p>
<ul>
<li><p>Compared current positions/limits after swap</p></li>
<li><p>Compared direction of movement/backlash</p></li>
</ul>
</li>
<li><p>Testing tracking for different combinations of SM1 angle, SM2 Angle and Theta.</p>
<ul>
<li><p>Using Laser: checking the dot reaches the centre of the detector</p></li>
<li><p>Using motor positions: Recorded positions and compared them to motor positions under SECI</p></li>
</ul>
</li>
</ul>
<section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h3>
<p>We noticed some discrepancies between the motor positions in SECI and IBEX for the mirror/theta tests. Investigation revealed that parts of the SECI calculations are incorrect. The theoretical IBEX approach is correct - correctness of the IBEX implementation still needs to be confirmed by the scientists. SECI implementation may need to be fixed as INTER will likely still be running on SECI in the near future.</p>
<section id="issues-found-with-conversion-script">
<h4>Issues found with conversion script:<a class="headerlink" href="#issues-found-with-conversion-script" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>“Home position” offset applied to <code class="docutils literal notranslate"><span class="pre">MTRXXXX.OFF</span></code></p>
<ul>
<li><p>In our case we wanted to ignore this value as homing is only done in SECI for now, but in other cases this is the correct behaviour</p></li>
</ul>
</li>
<li><p>Offset sign was incorrect</p></li>
<li><p>De-energise set incorrectly</p></li>
<li><p>Encoders were not set</p>
<ul>
<li><p>This is due to running the conversion on simulated motors.</p></li>
</ul>
</li>
</ul>
<p>–&gt; <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5654">Ticket 5654</a></p>
</section>
<section id="issues-found-with-reflectometry-server">
<h4>Issues found with reflectometry server:<a class="headerlink" href="#issues-found-with-reflectometry-server" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>InBeam status incorrect at component level</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5655">Ticket 5655</a></p></li>
</ul>
</li>
<li><p>Noticed a slight delay before move starts</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5658">Ticket 5658</a></p></li>
</ul>
</li>
<li><p>Some axes sounded unhappy when moving synchronously at a slow speed (e.g. detector height, optimised for certain speeds)</p>
<ul>
<li><p>Marked SM1/2 height driver as not synchronised as super mirror height axes are slow and are likely the main cause for this issue</p></li>
</ul>
</li>
</ul>
</section>
<section id="issues-found-with-ibex-in-general">
<h4>Issues found with IBEX in general<a class="headerlink" href="#issues-found-with-ibex-in-general" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>If a motor drives past its limits due to backlash it can stall and not complete the move</p>
<ul>
<li><p>This is an edge case but we should have a discussion whether this is the right behaviour</p></li>
</ul>
</li>
<li><p>Noticed IBEX IOC list to be blank after running SECI to IBEX swap script</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5659">Ticket 5659</a></p></li>
</ul>
</li>
<li><p>Boy console popping up hides scripting window</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5302">Ticket 5302</a></p></li>
</ul>
</li>
<li><p>Slit 3 West value was slightly off after a switch from SECI to IBEX.</p>
<ul>
<li><p>When switching back to SECI later it was the same as in IBEX, suggesting it is not an issue with the readback value between the two systems, but rather the axis had actually moved. The axis was not moved explicitly during this whole time, so not sure what exactly happened. We should keep an eye out to see whether this happens again.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Reflectomtery-IOC-CRISP.html" class="btn btn-neutral float-left" title="Reflectometry IOC - CRISP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Reflectomtery-IOC-POLREF.html" class="btn btn-neutral float-right" title="Reflectometry IOC - POLREF" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>