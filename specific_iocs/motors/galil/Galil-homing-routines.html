

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galil Homing Routines &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="IMAT Tomography Stages" href="IMAT-tomography-stages.html" />
    <link rel="prev" title="Galil default parameters" href="Galil-default-parameters.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../Specific-IOCs.html">Specific Devices &amp; IOCs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Cells.html">Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Choppers.html">Choppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cryogenics.html">Cryogenics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DAE-and-the-ICP.html">DAE (Data Acquisition Electronics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DAQ.html">DAQ (NI cDAQ)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Fluxgates.html">Fluxgates &amp; Magnetometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Gas-And-Liquid-Handling-Systems.html">Gas and liquid handling systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Imaging-Cameras.html">Imaging Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Loading-Rigs.html">Loading rigs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Magnets.html">Magnets &amp; Large Power Supplies</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Motors.html">Motors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Attocube.html">Attocube</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beckhoff.html">Beckhoff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../EnginX-Sample-Positioner.html">EnginX Sample Positioner</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../Galil.html">Galil</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Differences-between-real-Galil-and-simulated-motor.html">Differences between real Galil &amp; Simulated motor</a></li>
<li class="toctree-l4"><a class="reference internal" href="Galil-Homing-Routine-Steps.html">Galil Homing Routine steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="Galil-Instrument-Configuration.html">Galil Instrument Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="Galil-Userdef-Records.html">Galil Userdef records</a></li>
<li class="toctree-l4"><a class="reference internal" href="Galil-default-parameters.html">Galil default parameters</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Galil Homing Routines</a></li>
<li class="toctree-l4"><a class="reference internal" href="IMAT-tomography-stages.html">IMAT Tomography Stages</a></li>
<li class="toctree-l4"><a class="reference internal" href="Multi-galil-IOC.html">Multi-Galil IOC</a></li>
<li class="toctree-l4"><a class="reference internal" href="New-Galil-Driver.html">New Galil Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="Resetting-HOMEVAL.html">Resetting <code class="docutils literal notranslate"><span class="pre">HOMEVAL</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="Smoothing-Motor-Readback.html">Smoothing motor readback</a></li>
<li class="toctree-l4"><a class="reference internal" href="Updating-old-galil-driver.html">Updating the old Galil driver</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Linmot.html">Linmot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../McLennan-motors.html">McLennan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Newport.html">Newport</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PI-Rotation-Stage-setup.html">PI Rotation Stage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../SMC100.html">SMC100</a></li>
<li class="toctree-l3"><a class="reference internal" href="../SXD-Attocube.html">SXD Attocube</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Motors-Trouble-Shooting.html">Motors Trouble Shooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Adding-motor-IOC-to-global-motor-moving-and-stop-all.html">Add motor to global moving and stop all</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Clearing-the-Motors-are-Moving-state.html">Clearing the “motors moving” state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Set-the-raw-position-of-the-motor-without-moving-it.html">Set the raw position of the motor without moving it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Add-support-for-motor-extras.html">Add support for motor extras</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Motors-Extensions.html">Motor Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Multimeters.html">Multimeters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Other.html">Other / Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../PLCs.html">PLCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Polarisers-and-Analysers.html">Polarisers &amp; Analysers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Power-Distribution-Unit-%28PDU%29.html">Power distribution units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Power-Supplies.html">Power supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Pressure-Monitors.html">Pressure monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Reflectometry-IOC.html">Reflectometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Rheometers.html">Rheometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sample-Changers.html">Sample Changers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Signal-Generators.html">Signal Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Temperature-Controllers.html">Temperature Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
          <li class="breadcrumb-item"><a href="../../Motors.html">Motors</a></li>
          <li class="breadcrumb-item"><a href="../Galil.html">Galil</a></li>
      <li class="breadcrumb-item active">Galil Homing Routines</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/specific_iocs/motors/galil/Galil-homing-routines.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="galil-homing-routines">
<h1>Galil Homing Routines<a class="headerlink" href="#galil-homing-routines" title="Link to this heading"></a></h1>
<p>The galil motors can be configured to run one of the multiple homing routines. These routines are documented in the <a class="reference external" href="https://github.com/ISISComputingGroup/EPICS-galil/tree/master/GalilSup/Db">readme of the galil repository</a>; there is extra documentation on the <a class="reference internal" href="../../motor_extensions/MERLIN%2C-LET-and-WISH-Oscillating-radial-collimators.html"><span class="doc std std-doc">oscillating collimator page for those routines</span></a>.</p>
<p>The whole consideration for the routine has to include the default header and footer for the Galil, with the following basic structure:
Header
Home routine for axis A
Home routine for axis B
Home routine for axis C
Home routine for axis D
Home routine for axis E
Home routine for axis F
Home routine for axis G
Home routine for axis H
Footer</p>
<p>Typically we then append any other code for specific functions we need after the footer, see <a class="reference internal" href="../Galil.html"><span class="doc std std-doc">the Galil page</span></a> for more information.</p>
<p>The loading of the homing routines uses a macro to define the axis based on the location in the start controller setup (see <a class="reference internal" href="../Galil.html"><span class="doc std std-doc">Galil</span></a> for more detailed information), for brevity and ease of reading this will be replaced by X throughout the descriptions below.</p>
<p>Further command docs can be found in the share manuals in manc2xxx.pdf</p>
<section id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Link to this heading"></a></h2>
<p>There are a number of variables used within these routines.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>Variable Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">homeX</span></code></p></td>
<td><p>Indicates that a home has been requested (1)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hjogX</span></code></p></td>
<td><p>Indicates which step of the homing routine is to be completed next</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">inhomeX</span></code></p></td>
<td><p>Indicates that the axis is in the process of homing</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">slimflX</span></code></p></td>
<td><p>Soft limit in the forward direction set for general motor use, used as an interim holder whilst homing</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">slimblX</span></code></p></td>
<td><p>Soft limit in the reverse direction set for general motor use, used as an interim holder whilst homing</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mlock</span></code></p></td>
<td><p>?</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dpon</span></code></p></td>
<td><p>?</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dvalues</span></code></p></td>
<td><p>?</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">homedX</span></code></p></td>
<td><p>This is set to 1 before being returned as a message</p></td>
</tr>
</tbody>
</table>
</section>
<section id="header">
<h2>Header<a class="headerlink" href="#header" title="Link to this heading"></a></h2>
<p>This relates to <code class="docutils literal notranslate"><span class="pre">galil_Default_Header.gmc</span></code> as that relates to the home routines, and does the same task for each axis.
Set <code class="docutils literal notranslate"><span class="pre">homeX</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">hjogX</span> <span class="pre">=</span> <span class="pre">0</span></code>, and <code class="docutils literal notranslate"><span class="pre">inhomeX</span> <span class="pre">=</span> <span class="pre">0</span></code></p>
</section>
<section id="home-routine-structure-for-axis-x">
<h2>Home routine structure for axis X<a class="headerlink" href="#home-routine-structure-for-axis-x" title="Link to this heading"></a></h2>
<p>The basic structure of a homing routine is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">If</span> <span class="n">a</span> <span class="n">home</span> <span class="n">has</span> <span class="n">been</span> <span class="n">requested</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
   <span class="n">Indicate</span> <span class="n">that</span> <span class="n">we</span> <span class="n">are</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">homing</span> <span class="n">routine</span> <span class="p">(</span><span class="n">inhomeX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
   <span class="n">If</span> <span class="n">a</span> <span class="n">home</span> <span class="n">has</span> <span class="n">been</span> <span class="n">requested</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">we</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">yet</span> <span class="n">started</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">steps</span> <span class="p">(</span><span class="n">hjogX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="n">Store</span> <span class="n">the</span> <span class="n">soft</span> <span class="n">limits</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">variables</span> <span class="n">slimflX</span> <span class="ow">and</span> <span class="n">slimblX</span>
      <span class="n">Set</span> <span class="n">the</span> <span class="n">soft</span> <span class="n">limits</span> <span class="n">to</span> <span class="n">their</span> <span class="n">maximum</span> <span class="n">values</span>
      <span class="n">Indicate</span> <span class="n">that</span> <span class="n">we</span> <span class="n">can</span> <span class="n">go</span> <span class="n">to</span> <span class="n">step</span> <span class="mi">1</span> <span class="n">of</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">routine</span> <span class="p">(</span><span class="n">hjogX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
   <span class="n">If</span> <span class="n">both</span> <span class="n">limits</span> <span class="n">are</span> <span class="n">active</span> <span class="ow">and</span> <span class="n">a</span> <span class="n">home</span> <span class="n">has</span> <span class="n">been</span> <span class="n">requested</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
      <span class="n">Clear</span> <span class="n">the</span> <span class="n">home</span> <span class="n">request</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span> <span class="n">to</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">system</span>
   <span class="n">If</span> <span class="n">we</span> <span class="n">are</span> <span class="n">about</span> <span class="n">to</span> <span class="n">start</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">routine</span> <span class="p">(</span><span class="n">hjogX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="n">AND</span> <span class="n">the</span> <span class="n">motor</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">motion</span> <span class="n">AND</span> <span class="n">a</span> <span class="n">home</span> <span class="n">has</span> <span class="n">been</span> <span class="n">requested</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
      <span class="n">Stop</span> <span class="n">the</span> <span class="n">motor</span>
   <span class="n">Undertake</span> <span class="n">appropriate</span> <span class="n">homing</span> <span class="n">steps</span>
   <span class="n">If</span> <span class="n">we</span> <span class="n">have</span> <span class="n">completed</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">steps</span> <span class="p">(</span><span class="n">hjogX</span> <span class="o">=</span> <span class="n">number</span> <span class="n">of</span> <span class="n">steps</span> <span class="ow">in</span> <span class="n">homing</span> <span class="n">routine</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="n">AND</span> <span class="n">the</span> <span class="n">motor</span> <span class="n">isn</span><span class="s1">&#39;t moving AND a home has been requested    (homeX = 1) AND in certain cases that the reason for the motor stop is the appropriate value</span>
      <span class="n">Indicate</span> <span class="n">that</span> <span class="n">we</span> <span class="n">are</span> <span class="n">have</span> <span class="n">reached</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">steps</span> <span class="p">(</span><span class="n">hjogX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="n">Clear</span> <span class="n">the</span> <span class="n">home</span> <span class="n">request</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span> <span class="n">to</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">system</span>
      <span class="n">Set</span> <span class="n">the</span> <span class="n">homedX</span> <span class="n">varirable</span> <span class="n">to</span> <span class="mi">1</span><span class="p">,</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span> <span class="n">to</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">system</span>
<span class="n">Else</span>
   <span class="n">Indicate</span> <span class="n">that</span> <span class="n">we</span> <span class="n">are</span> <span class="n">have</span> <span class="n">reached</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">steps</span> <span class="p">(</span><span class="n">hjogX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">If</span> <span class="n">the</span> <span class="n">home</span> <span class="n">request</span> <span class="n">has</span> <span class="n">been</span> <span class="n">cleared</span> <span class="p">(</span><span class="n">homeX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">AND</span> <span class="n">we</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">completed</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">routine</span> <span class="p">(</span><span class="n">inhomeX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
   <span class="n">Revert</span> <span class="n">the</span> <span class="n">soft</span> <span class="n">limits</span> <span class="n">to</span> <span class="n">their</span> <span class="n">original</span> <span class="n">values</span>
   <span class="n">Indicate</span> <span class="n">that</span> <span class="n">we</span> <span class="n">have</span> <span class="n">finished</span> <span class="n">the</span> <span class="n">homing</span> <span class="n">routine</span> <span class="p">(</span><span class="n">inhomeX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">If</span> <span class="n">the</span> <span class="n">variable</span> <span class="n">mlock</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="n">Set</span> <span class="n">the</span> <span class="n">interrupt</span> <span class="n">masks</span> <span class="n">to</span> <span class="n">dpon</span> <span class="ow">and</span> <span class="n">dvalues</span>
</pre></div>
</div>
<p>The code to use is as follows, be sure to change the items in square brackets as appropriate, and consider the need or not for a stop code check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>NO*****************AXIS ${AXIS}********************
NO*********HOME - [Homing routine title]************
[NO*********Describe homing routine steps if not obvious**********]
#HOME${AXIS}
IF (home${AXIS}=1)
        inhome${AXIS}=1
	IF ((home${AXIS}=1) &amp; (hjog${AXIS}=0))
	    slimfl${AXIS}=_FL${AXIS};FL${AXIS}=2147483647
		slimbl${AXIS}=_BL${AXIS};BL${AXIS}=-2147483648
		hjog${AXIS}=1
	ENDIF
	IF ((_LR${AXIS}=0) &amp; (_LF${AXIS}=0) &amp; (home${AXIS}=1))
		home${AXIS}=0;MG &quot;home${AXIS}&quot;, home${AXIS};ENDIF
	IF ((hjog${AXIS}=1) &amp; (_BG${AXIS}=1) &amp; (home${AXIS}=1))
		ST${AXIS};ENDIF
        [Undertake the appropriate homing steps]
	IF ((hjog${AXIS}=[number of homing steps + 1]) &amp; (_BG${AXIS}=0) &amp; (home${AXIS}=1) [&amp; (_SC${AXIS}=10)])
		hjog${AXIS}=0;home${AXIS}=0;homed${AXIS}=1
		MG &quot;home${AXIS}&quot;, home${AXIS};MG &quot;homed${AXIS}&quot;, homed${AXIS}
	ENDIF
ELSE
	hjog${AXIS}=0
ENDIF
IF ((home${AXIS}=0) &amp; (inhome${AXIS}=1))
    FL${AXIS}=slimfl${AXIS}
	BL${AXIS}=slimbl${AXIS}
	inhome${AXIS}=0
ENDIF
IF (mlock=1)
	II ,,dpon,dvalues
ENDIF
</pre></div>
</div>
<section id="home-routine-steps">
<h3>Home routine steps<a class="headerlink" href="#home-routine-steps" title="Link to this heading"></a></h3>
<p>So for homing step n you would need to follow this basic pattern in the code and update as appropriate, be sure to change the items in square brackets as appropriate, and consider the need or not for a stop code check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>IF ((hjog${AXIS} = n) &amp; (_BG${AXIS}=0) &amp; (home${AXIS}=1) [&amp; (_SC${AXIS}=[value])])
   [Homing Routine Step]
   hjog${AXIS} = n + 1
ENDIF
</pre></div>
</div>
<p>The existing steps are detailed in <a class="reference internal" href="Galil-Homing-Routine-Steps.html"><span class="doc std std-doc">Galil Homing Routine Steps</span></a></p>
</section>
</section>
<section id="the-home-no-home-routine">
<h2>The Home No Home routine<a class="headerlink" href="#the-home-no-home-routine" title="Link to this heading"></a></h2>
<p>This is a variation on the above, as it does not include the standard items relating to the soft limits or stopping the motor</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Galil-default-parameters.html" class="btn btn-neutral float-left" title="Galil default parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="IMAT-tomography-stages.html" class="btn btn-neutral float-right" title="IMAT Tomography Stages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>