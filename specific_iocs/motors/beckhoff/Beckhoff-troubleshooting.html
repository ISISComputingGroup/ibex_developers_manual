

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Beckhoff troubleshooting &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="EnginX Sample Positioner" href="../EnginX-Sample-Positioner.html" />
    <link rel="prev" title="Beckhoff testing" href="Beckhoff-testing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../Specific-IOCs.html">Specific Devices &amp; IOCs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Cells.html">Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Choppers.html">Choppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cryogenics.html">Cryogenics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DAE-and-the-ICP.html">DAE (Data Acquisition Electronics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DAQ.html">DAQ (NI cDAQ)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Fluxgates.html">Fluxgates &amp; Magnetometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Gas-And-Liquid-Handling-Systems.html">Gas and liquid handling systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Imaging-Cameras.html">Imaging Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Loading-Rigs.html">Loading rigs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Magnets.html">Magnets &amp; Large Power Supplies</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Motors.html">Motors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Attocube.html">Attocube</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../Beckhoff.html">Beckhoff</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Beckhoff-architecture.html">Beckhoff IOC Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="Beckhoff-commissioning.html">Beckhoff commissioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="Beckhoff-testing.html">Beckhoff testing</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Beckhoff troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../EnginX-Sample-Positioner.html">EnginX Sample Positioner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Galil.html">Galil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Linmot.html">Linmot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../McLennan-motors.html">McLennan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Newport.html">Newport</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PI-Rotation-Stage-setup.html">PI Rotation Stage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../SMC100.html">SMC100</a></li>
<li class="toctree-l3"><a class="reference internal" href="../SXD-Attocube.html">SXD Attocube</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Motors-Trouble-Shooting.html">Motors Trouble Shooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Adding-motor-IOC-to-global-motor-moving-and-stop-all.html">Add motor to global moving and stop all</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Clearing-the-Motors-are-Moving-state.html">Clearing the “motors moving” state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Set-the-raw-position-of-the-motor-without-moving-it.html">Set the raw position of the motor without moving it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Add-support-for-motor-extras.html">Add support for motor extras</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Motors-Extensions.html">Motor Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Multimeters.html">Multimeters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Other.html">Other / Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../PLCs.html">PLCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Polarisers-and-Analysers.html">Polarisers &amp; Analysers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Power-Distribution-Unit-%28PDU%29.html">Power distribution units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Power-Supplies.html">Power supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Pressure-Monitors.html">Pressure monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Reflectometry-IOC.html">Reflectometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Rheometers.html">Rheometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sample-Changers.html">Sample Changers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Signal-Generators.html">Signal Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Temperature-Controllers.html">Temperature Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
          <li class="breadcrumb-item"><a href="../../Motors.html">Motors</a></li>
          <li class="breadcrumb-item"><a href="../Beckhoff.html">Beckhoff</a></li>
      <li class="breadcrumb-item active">Beckhoff troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/specific_iocs/motors/beckhoff/Beckhoff-troubleshooting.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="beckhoff-troubleshooting">
<h1>Beckhoff troubleshooting<a class="headerlink" href="#beckhoff-troubleshooting" title="Link to this heading"></a></h1>
<p>As we don’t really handle any logic minus the motor record aliasing, there isn’t much to go wrong (in theory)</p>
<p><strong>The first thing to do if an issue occurs is open a device screen which is pointing to the “Beckhoff engineering view” and check all axes for an error ID. note you have to press the load button to load an axis.</strong></p>
<ul class="simple">
<li><p>If the records in here are <em>all</em> in alarm, it’s likely that there is a comms issue. See “ADS route and pinging” below.</p></li>
<li><p>If not, and there are error IDs for any axis, the Beckhoff has thrown an error. You may be able to hit “reset” and resolve this, if not contact the IESG or the IDD Motion team.</p></li>
<li><p>If the axis does not have the “enabled” light on, try and enable it. If this does not work there is probably some form of interlock stopping this from working, such as light curtains, bump strips etc. or the axis is in an error which prevents it from being enabled - see below.</p></li>
</ul>
<section id="ads-route-and-pinging">
<h2>ADS route and pinging<a class="headerlink" href="#ads-route-and-pinging" title="Link to this heading"></a></h2>
<p>an easy thing to check to see if a Beckhoff is actually reachable is to</p>
<ul class="simple">
<li><p>ping <code class="docutils literal notranslate"><span class="pre">192.168.1.22x</span></code> (usually 221)</p>
<ul>
<li><p>Note, not all Beckhoffs reply to ping. You can RDP into them, so try this as well.</p></li>
</ul>
</li>
<li><p>from the NDX system tray right click the TwinCAT icon, then routing -&gt; edit routes. check there is an <code class="docutils literal notranslate"><span class="pre">x</span></code> or padlock symbol in the “connected” column.</p></li>
</ul>
<p>if neither of these work the cable has probably fallen out or the Beckhoff has gone down.</p>
</section>
<section id="twincat-beckhoff-engineering-view">
<h2>TwinCAT Beckhoff Engineering View<a class="headerlink" href="#twincat-beckhoff-engineering-view" title="Link to this heading"></a></h2>
<section id="error-xxxxx">
<h3>Error: <code class="docutils literal notranslate"><span class="pre">xxxxx</span></code><a class="headerlink" href="#error-xxxxx" title="Link to this heading"></a></h3>
<p>This is an issue reporting from the Beckhoff itself. you may be able to reset the error and get moving again. otherwise contact IESG to resolve. A list of error IDs are available from the <a class="reference external" href="https://infosys.beckhoff.com/english.php?content=../content/1033/tcdiagnostics/513122571.html&amp;amp;id=3090135020933951410">TwinCAT documentation</a>.</p>
</section>
<section id="safety-systems">
<h3>Safety systems<a class="headerlink" href="#safety-systems" title="Link to this heading"></a></h3>
<p>Safety systems such as light curtains or bump strips will throw the controller into error (and usually disable all axes) as opposed to just stopping movement like on a Galil. The green reset button on each beamline should clear the error and re-enable.</p>
</section>
</section>
<section id="virtual-axes-do-not-accept-two-setpoints-in-quick-succession">
<h2>Virtual axes do not accept two setpoints in quick succession<a class="headerlink" href="#virtual-axes-do-not-accept-two-setpoints-in-quick-succession" title="Link to this heading"></a></h2>
<p>See <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/8339">https://github.com/ISISComputingGroup/IBEX/issues/8339</a> for a detailed description of the issue.</p>
<p>The solution is to set <code class="docutils literal notranslate"><span class="pre">.DLY</span></code> to 0.25 in the motor record (which causes a 250ms “settle time” after motions).</p>
</section>
<section id="instrument-specific-beckhoff-information">
<h2>Instrument specific Beckhoff information<a class="headerlink" href="#instrument-specific-beckhoff-information" title="Link to this heading"></a></h2>
<section id="sandals-jaws-and-sample-changer">
<h3>SANDALS - Jaws and Sample Changer<a class="headerlink" href="#sandals-jaws-and-sample-changer" title="Link to this heading"></a></h3>
<p>SANDALS has a Beckhoff PLC which serves the Jaws permanently, and the Sample Changer when it is plugged in (over an <a class="reference external" href="https://en.wikipedia.org/wiki/EtherCAT">EtherCAT</a> network)</p>
<p>Some of these axes are relatively-encoded, so need to be homed/calibrated before use after a power cycle. At the moment we use the <code class="docutils literal notranslate"><span class="pre">.ATHM</span></code> field to indicate this, so if the home icon is not shown on the Table of Motors the axes have not been calibrated and will error when a move is attempted.</p>
<p>The Sample changer has some <code class="docutils literal notranslate"><span class="pre">pt100</span></code> sensors for temperature mounted on it, these are fed in through the Beckhoff as extra fields. These are loaded by <a class="reference external" href="https://github.com/ISISComputingGroup/EPICS-motorExtensions/blob/master/sandalsSampleChangerApp/Db/sandals_sample_changer_beckhoff_extras.substitutions">this <code class="docutils literal notranslate"><span class="pre">.db</span></code></a></p>
</section>
<section id="inter-detector-tank-including-jaws-4">
<h3>INTER - Detector tank including Jaws 4<a class="headerlink" href="#inter-detector-tank-including-jaws-4" title="Link to this heading"></a></h3>
<p>This is currently the most complex implementation of using a Beckhoff PLC as it handles kinematics between physical axes and flight paths, traditionally “worked out” by the Reflectometry server. It has some custom routines which can be accessed from the PLC HMI or through the <code class="docutils literal notranslate"><span class="pre">INTER</span> <span class="pre">Beckhoff</span> <span class="pre">Diagnostics</span></code> device screen in IBEX.</p>
<p>It also controls some Jaws on the front of the tank.</p>
</section>
<section id="larmor-detector-bench">
<h3>LARMOR - Detector Bench<a class="headerlink" href="#larmor-detector-bench" title="Link to this heading"></a></h3>
<p>This is a single axis. It lets IBEX know about an air PLC signal as it requires an air bearing to move. This is fed in by <a class="reference external" href="https://github.com/ISISComputingGroup/EPICS-motorExtensions/blob/master/larmorBeckhoffExtrasApp/Db/larmor_beckhoff_extras.substitutions">this <code class="docutils literal notranslate"><span class="pre">.db</span></code></a> and the bump strip signal is flipped and sent to the bump strip PV which is shown in the banner to indicate that motion has tripped.</p>
</section>
<section id="imat-rotation-and-height-stage">
<h3>IMAT - Rotation and Height stage<a class="headerlink" href="#imat-rotation-and-height-stage" title="Link to this heading"></a></h3>
<p>This is currently just two axes, with no real quirks on our side.</p>
</section>
<section id="surf-cloche-motion-and-jaws-1-2">
<h3>SURF - Cloche motion and jaws 1&amp;2<a class="headerlink" href="#surf-cloche-motion-and-jaws-1-2" title="Link to this heading"></a></h3>
<p>SURF’s motion involves the tank, including the supermirror and frame-overlap mirror, as well as Jaws 1 and 2. This has had issues with encoder radiation in the past which has required a PLC power cycle, which in turn then requires a power restore. In order to get this properly working, <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/8464">this ticket</a> needs to be completed.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Beckhoff-testing.html" class="btn btn-neutral float-left" title="Beckhoff testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../EnginX-Sample-Positioner.html" class="btn btn-neutral float-right" title="EnginX Sample Positioner" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>