

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RIKEN PLC &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SANS2D Vacuum PLC" href="SANS2D-vacuum-PLC.html" />
    <link rel="prev" title="Omron FINS" href="Omron-FINS.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Specific-IOCs.html">Specific Devices &amp; IOCs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Cells.html">Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Choppers.html">Choppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Cryogenics.html">Cryogenics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DAE-and-the-ICP.html">DAE (Data Acquisition Electronics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DAQ.html">DAQ (NI cDAQ)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fluxgates.html">Fluxgates &amp; Magnetometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Gas-And-Liquid-Handling-Systems.html">Gas and liquid handling systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Imaging-Cameras.html">Imaging Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Loading-Rigs.html">Loading rigs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Magnets.html">Magnets &amp; Large Power Supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Motors.html">Motors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Motors-Extensions.html">Motor Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Multimeters.html">Multimeters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Other.html">Other / Miscellaneous</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../PLCs.html">PLCs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Helium-Recovery-PLC.html">He Recovery PLC</a></li>
<li class="toctree-l3"><a class="reference internal" href="MAPS-Vacuum-System.html">MAPS Vacuum System</a></li>
<li class="toctree-l3"><a class="reference internal" href="OPCUA.html">OPC UA</a></li>
<li class="toctree-l3"><a class="reference internal" href="Omron-FINS.html">Omron FINS</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">RIKEN PLC</a></li>
<li class="toctree-l3"><a class="reference internal" href="SANS2D-vacuum-PLC.html">SANS2D Vacuum PLC</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schneider-PLC.html">Schneider PLC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Polarisers-and-Analysers.html">Polarisers &amp; Analysers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Power-Distribution-Unit-%28PDU%29.html">Power distribution units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Power-Supplies.html">Power supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Pressure-Monitors.html">Pressure monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Reflectometry-IOC.html">Reflectometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Rheometers.html">Rheometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sample-Changers.html">Sample Changers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Signal-Generators.html">Signal Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Temperature-Controllers.html">Temperature Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
          <li class="breadcrumb-item"><a href="../PLCs.html">PLCs</a></li>
      <li class="breadcrumb-item active">RIKEN PLC</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/specific_iocs/plcs/RIKEN-PLC.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="riken-plc">
<h1>RIKEN PLC<a class="headerlink" href="#riken-plc" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>The main PLC on RIKEN is a “Schneider Electric M580” and is responsible for controlling and monitoring the various systems on the beamlines, e.g. vacuum equipment and magnet cooling.  The Schneider PLC IOC (<code class="docutils literal notranslate"><span class="pre">SCHNDR_01</span></code>) runs on <code class="docutils literal notranslate"><span class="pre">NDXRIKENFE</span></code> and provides access to designated PLC registers (memory addresses) via the Asyn MODBUS driver.</p>
</section>
<section id="registers-and-variables">
<h2>Registers and Variables<a class="headerlink" href="#registers-and-variables" title="Link to this heading"></a></h2>
<p>The groups of variables and their associated registers are defined in the document <a class="reference external" href="https://stfc365.sharepoint.com/:w:/r/sites/ISISExperimentControls/ICP%20Discussions/RIKEN%20FE/RIKEN%20PLC%20IBEX%20Specification%20-%20Issue%20G_TC.docx?d=w277cb25c4cbc4e4ba988f52e49c1eb29&amp;amp;csf=1&amp;amp;web=1&amp;amp;e=zbhcoa"><code class="docutils literal notranslate"><span class="pre">RIKEN</span> <span class="pre">PLC</span> <span class="pre">IBEX</span> <span class="pre">Specification</span></code></a> (which can be found in the RIKEN FE ICP Discussions area of SharePoint) and are as follows: (all are read-only, apart from the vacuum valve controls, see below)</p>
<ul class="simple">
<li><p>Separator vacuum status</p></li>
<li><p>Solenoid status</p></li>
<li><p>Kickers water, vacuum and MOL (Magnet Off Light) status</p></li>
<li><p>Kickers status and output (voltage and current)</p></li>
<li><p>GH (Gauge Head) vacuum gauge status</p></li>
<li><p>LV (Line Valve), AMGV (All Metal Gate Valve) and FSOV (Fast Shut Off Valve) vacuum valve status</p></li>
<li><p>LV, AMGV, FSOV, control (<strong>writable</strong> from IBEX, but only to <strong>open</strong> the valves)</p></li>
<li><p>BP (Backing Pump) and TP (Turbo Pump) vacuum pump status</p></li>
<li><p>PIV (Pump Isolation Valve) interlock status</p></li>
<li><p>LV, AMGV, FSOV, BPV1 interlock status</p></li>
<li><p>BB (BeamBlocker) status and information</p></li>
<li><p>Magnets Klixon interlock status (a <em>Klixon</em> is a thermal switch which opens/closes at a set temperature)</p></li>
<li><p>Magnets cooling water flow status, rate and temperature</p></li>
<li><p>RBox (Rectifier Box) and bypass interlock status</p></li>
<li><p>MOL (Magnet Off Light) status (purely the status of the <em>bulb</em>, not the magnet state)</p></li>
</ul>
</section>
<section id="connection">
<h2>Connection<a class="headerlink" href="#connection" title="Link to this heading"></a></h2>
<p>The PLC is connected to the ISIS Controls Network using a fixed/static IP address.  It is currently patched directly into the main switch in the R55 Hub Room which has a port configured via a VLAN.  The PLC also has a “local” network to connect to its satellite nodes and HMI screens.</p>
</section>
<section id="location">
<h2>Location<a class="headerlink" href="#location" title="Link to this heading"></a></h2>
<p>The PLC is physically located on the ground floor of the RIKEN area in R55, the ISIS TS1 Experiment Hall, in the end rack of a block of five (labelled <strong>RR5</strong>).</p>
</section>
<section id="configuration-files">
<h2>Configuration Files<a class="headerlink" href="#configuration-files" title="Link to this heading"></a></h2>
<p>IOC macro values are specified in the <code class="docutils literal notranslate"><span class="pre">globals.txt</span></code> file in the settings area. There are macros to specify the connection type (TCP in this case), IP address of the PLC and which configuration (<code class="docutils literal notranslate"><span class="pre">CMD</span></code>) file to load.  Macros are not defined in the IOC configuration screen of the client to avoid accidental editing, and because the values are very unlikely to change.</p>
<p>The CMD file (<code class="docutils literal notranslate"><span class="pre">RIKENFE.cmd</span></code>) is located in the <a class="reference external" href="https://github.com/ISISComputingGroup/EPICS-ioc/tree/master/SCHNDR/iocBoot/iocSCHNDR-IOC-01/devices"><code class="docutils literal notranslate"><span class="pre">devices</span></code></a> directory of the IOC.</p>
<p>The DB file (<code class="docutils literal notranslate"><span class="pre">RIKENFE.db</span></code>) is generated using a set of template files which correspond to types of PLC variables and readback values.  The substitution and CMD files follow the structure of the Specifications document referenced above, and so it is advised to read them in parallel when required.  See the <a class="reference external" href="https://github.com/ISISComputingGroup/EPICS-ioc/tree/master/SCHNDR/SCHNDR-IOC-01App/Db"><code class="docutils literal notranslate"><span class="pre">DB</span></code></a> area of the IOC directory.</p>
<p>The PLC IOC also loads a separate DB file (<code class="docutils literal notranslate"><span class="pre">RIKENFE_TEMPMON.db</span></code>) for monitoring temperatures of a selection of magnets (RQ1, RQ2, RB1) and is purely for logging purposes.  This is at the request of the Electrical Controls Group who are performing an experimental analysis.</p>
<p>The IOC called RKNMNTR is designed to deal with calculating the magnet temperatures based on the PSU currents on RIKENFE (SCHNDR IOCs).
Currently it provides raw volt reading, ADC volt, actual volt, resistance and temperature per tap for magnets RQ1, RQ2, RB1 on the following PV patterns respectively:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IN:RIKENFE:&lt;magnet&gt;:&lt;tap&gt;:VOLT:RAW</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IN:RIKENFE:&lt;magnet&gt;:&lt;tap&gt;:VOLT:ADC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IN:RIKENFE:&lt;magnet&gt;:&lt;tap&gt;:VOLT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IN:RIKENFE:&lt;magnet&gt;:&lt;tap&gt;:RES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IN:RIKENFE:&lt;magnet&gt;:&lt;tap&gt;:TEMP</span></code></p></li>
</ul>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;magnet&gt;</span></code> is RQ1, RQ2 or RB1 and <code class="docutils literal notranslate"><span class="pre">&lt;tap&gt;</span></code> is between TAP01-TAP24.</p>
<blockquote>
<div><p><strong>Note</strong>
This IOC will be live on RIKENFE on the next deploy.</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Omron-FINS.html" class="btn btn-neutral float-left" title="Omron FINS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SANS2D-vacuum-PLC.html" class="btn btn-neutral float-right" title="SANS2D Vacuum PLC" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>