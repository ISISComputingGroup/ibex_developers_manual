

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Streaming &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data streaming: ADRs" href="datastreaming/ADRs.html" />
    <link rel="prev" title="Muon Separator Power Supply" href="daq/Muon-Separator-Power-Supply.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Specific-IOCs.html">Specific Devices &amp; IOCs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Cells.html">Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="Choppers.html">Choppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cryogenics.html">Cryogenics</a></li>
<li class="toctree-l2"><a class="reference internal" href="DAE-and-the-ICP.html">DAE (Data Acquisition Electronics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="DAQ.html">DAQ (NI cDAQ)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Streaming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/ADRs.html">Data streaming: ADRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming---File-writing.html">Data streaming: File writing</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming---Sample-Environment.html">Data streaming: Sample environment forwarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming--neutron-events-histograms.html">Data streaming: Neutron events and histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming-How-To.html">Data streaming: how-to guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming-Topics.html">Data streaming: topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming-hardware-architecture.html">Data streaming: hardware architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastreaming/Datastreaming-run-starts-stops.html">Data streaming: run starts/stops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Fluxgates.html">Fluxgates &amp; Magnetometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Gas-And-Liquid-Handling-Systems.html">Gas and liquid handling systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="Imaging-Cameras.html">Imaging Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="Loading-Rigs.html">Loading rigs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Magnets.html">Magnets &amp; Large Power Supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="Motors.html">Motors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Motors-Extensions.html">Motor Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Multimeters.html">Multimeters</a></li>
<li class="toctree-l2"><a class="reference internal" href="Other.html">Other / Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="PLCs.html">PLCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Polarisers-and-Analysers.html">Polarisers &amp; Analysers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Power-Distribution-Unit-%28PDU%29.html">Power distribution units</a></li>
<li class="toctree-l2"><a class="reference internal" href="Power-Supplies.html">Power supplies</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pressure-Monitors.html">Pressure monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reflectometry-IOC.html">Reflectometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Rheometers.html">Rheometers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sample-Changers.html">Sample Changers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Signal-Generators.html">Signal Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="Temperature-Controllers.html">Temperature Controllers</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
      <li class="breadcrumb-item active">Data Streaming</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/specific_iocs/Datastreaming.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="data-streaming">
<h1>Data Streaming<a class="headerlink" href="#data-streaming" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The data streaming system is being built as a requirement for HRPD-X and possibly SANDALS-II, separate (and complementary) to the <code class="docutils literal notranslate"><span class="pre">MNeuData</span></code> project. HRPD-X, SANDALS-II and other future instruments will not have a traditional DAE2/DAE3 as they are now obsolete. It is architecturally similar to the system that the ESS uses to take data (neutron events, sample environment, and anything else that we can throw into a streaming platform) and write it to file. Previously ISIS aided development to the ESS’ streaming pipeline as part of an in-kind project. The system will replace the ICP at ISIS. Note that all documentation here is applicable to the HRPD-X upgrade and may change in the future.</p>
<p>In general this works by producing both neutron events and histograms, sample environment data, and other diagnostic data into a <a class="reference external" href="https://kafka.apache.org/">Kafka</a> cluster and having clients (consumers in Kafka lingo!) that either view data live and act on it or write the data to a nexus file. Additional information can be found <a class="reference external" href="http://accelconf.web.cern.ch/AccelConf/icalepcs2017/papers/tupha029.pdf">here</a> and <a class="reference external" href="https://iopscience.iop.org/article/10.1088/1742-6596/1021/1/012013">here</a>.</p>
<p>All data is serialised into <a class="reference external" href="https://flatbuffers.dev/">Flatbuffers</a> blobs using <a class="reference external" href="https://github.com/ess-dmsc/streaming-data-types">these schemas</a> - we have a tool called <a class="reference external" href="https://github.com/ISISComputingGroup/saluki">saluki</a> which can deserialise these and make them human-readable after they’ve been put into Kafka.</p>
<p>Overall architecture is as follows:</p>
<p><img alt="" src="../_images/ISISDSLayout.drawio.svg" /></p>
<p>This comprises of a few different consumers and producers:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/kafka_dae_diagnostics"><code class="docutils literal notranslate"><span class="pre">kafka_dae_diagnostics</span></code></a> - This is a soft IOC which provides <code class="docutils literal notranslate"><span class="pre">areaDetector</span></code> views, spectra plots and so on by consuming events from the cluster and displaying them over EPICS CA/PVA.</p></li>
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/kafka_dae_control"><code class="docutils literal notranslate"><span class="pre">kafka_dae_control</span></code></a> - This is also a soft IOC which is more or less a drop-in replacement for the ISISDAE. It provides an interface that several clients (ie. <a class="reference external" href="https://github.com/ISISComputingGroup/genie">genie</a>, <a class="reference external" href="https://github.com/ISISComputingGroup/ibex_bluesky_core">ibex_bluesky_core</a>, <a class="reference external" href="https://github.com/ISISComputingGroup/ibex_gui">ibex_gui</a>) talk to to start/stop runs and configure streaming electronics. <code class="docutils literal notranslate"><span class="pre">kafka_dae_control</span></code> will send UDP packets to the streaming electronics to configure it.</p></li>
<li><p><a class="reference external" href="https://github.com/ISISComputingGroup/kafka_forwarder_configurer"><code class="docutils literal notranslate"><span class="pre">kafka_forwarder_configurer</span></code></a> - This configures the <code class="docutils literal notranslate"><span class="pre">forwarder</span></code> with the blocks that are in an instrument’s current configuration, as well as other PVs which will either get written to a file or archived for e.g. the log plotter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forwarder</span></code> - See <a class="reference internal" href="datastreaming/Datastreaming---Sample-Environment.html"><span class="doc std std-doc">Forwarding Sample Environment</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filewriter</span></code> - See <a class="reference internal" href="datastreaming/Datastreaming---File-writing.html"><span class="doc std std-doc">File writing</span></a></p></li>
</ul>
<section id="kafkacluster">
<h2>The Kafka Cluster<a class="headerlink" href="#kafkacluster" title="Link to this heading"></a></h2>
<p>There is a (non-production!) <a class="reference external" href="https://www.redpanda.com/">Redpanda</a> Kafka cluster at <code class="docutils literal notranslate"><span class="pre">livedata.isis.cclrc.ac.uk:31092</span></code>.
A web interface is available <a class="reference external" href="https://reduce.isis.cclrc.ac.uk/redpanda-console/overview">here</a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It was decided that we no longer maintain the Kafka cluster, and it will be handled by the Flexible Interactive
Automation team. See <code class="docutils literal notranslate"><span class="pre">\\isis\shares\ISIS_Experiment_Controls\On</span> <span class="pre">Call\autoreduction_livedata_support.txt</span></code> for their
support information.</p>
</div>
</section>
<section id="how-to-faqs">
<h2>How to/FAQs<a class="headerlink" href="#how-to-faqs" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="datastreaming/Datastreaming-How-To.html#datastreaminghowto"><span class="std std-ref">Data streaming: how-to guide</span></a></p>
</section>
<section id="run-starts-stops">
<h2>Run starts/stops<a class="headerlink" href="#run-starts-stops" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="datastreaming/Datastreaming-run-starts-stops.html#dsrunstartstops"><span class="std std-ref">Data streaming: run starts/stops</span></a></p>
</section>
<section id="se-data">
<h2>SE Data<a class="headerlink" href="#se-data" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="datastreaming/Datastreaming---Sample-Environment.html"><span class="doc std std-doc">Forwarding Sample Environment</span></a></p>
</section>
<section id="neutron-events-and-histograms">
<h2>Neutron events and histograms<a class="headerlink" href="#neutron-events-and-histograms" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="datastreaming/Datastreaming--neutron-events-histograms.html#dseventshistos"><span class="std std-ref">Data streaming: Neutron events and histograms</span></a></p>
</section>
<section id="filewriting">
<h2>Filewriting<a class="headerlink" href="#filewriting" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="datastreaming/Datastreaming---File-writing.html"><span class="doc std std-doc">File writing</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="daq/Muon-Separator-Power-Supply.html" class="btn btn-neutral float-left" title="Muon Separator Power Supply" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datastreaming/ADRs.html" class="btn btn-neutral float-right" title="Data streaming: ADRs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Feb 27, 2026.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>