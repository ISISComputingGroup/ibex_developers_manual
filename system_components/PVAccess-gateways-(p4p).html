

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PVAccess Gateways &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python (including Uktena, uv)" href="Python.html" />
    <link rel="prev" title="Testing Nicos" href="nicos/Testing-Nicos.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../System-components.html">Backend System Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ActiveMQ.html">ActiveMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="Alarms.html">Alarms</a></li>
<li class="toctree-l2"><a class="reference internal" href="BlockServer.html">BlockServer</a></li>
<li class="toctree-l2"><a class="reference internal" href="CSS-Archive-Engine.html">CS-Studio Archive Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="Central-archiver-appliance.html">Central archiver appliance</a></li>
<li class="toctree-l2"><a class="reference internal" href="DatabaseServer.html">Database Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="Gateway.html">Gateways</a></li>
<li class="toctree-l2"><a class="reference internal" href="IOC-message-logging.html">IOC Message Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="Inst-etc-IOC.html"><code class="docutils literal notranslate"><span class="pre">INSTETC</span></code> IOC</a></li>
<li class="toctree-l2"><a class="reference internal" href="Journal-Viewer.html">Journals</a></li>
<li class="toctree-l2"><a class="reference internal" href="LabVIEW.html">LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="Logging-from-the-archive.html">Logging from the archive</a></li>
<li class="toctree-l2"><a class="reference internal" href="MySQL-Database.html">MySQL database</a></li>
<li class="toctree-l2"><a class="reference internal" href="Nicos.html">NICOS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">PVAccess Gateways</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python.html">Python (including Uktena, <code class="docutils literal notranslate"><span class="pre">uv</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Remote-IOCs.html">Remote IOC Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="Run-control.html">Run Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="Settings-and-Configurations.html">Settings &amp; Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Startup-and-Shutdown.html">Startup and Shutdown</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../System-components.html">Backend System Components</a></li>
      <li class="breadcrumb-item active">PVAccess Gateways</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/system_components/PVAccess-gateways-(p4p).md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="pvaccess-gateways">
<h1>PVAccess Gateways<a class="headerlink" href="#pvaccess-gateways" title="Link to this heading"></a></h1>
<p>Instrument PVAccess gateways are available as of <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/8309">#8319</a> for connecting to EPICS V4 PVs on the same subnet. In practice this means other PVs in r3 if you are in r3, and similarly for r55/r80/r2.</p>
<p>Generally it is recommended to run a single gateway process per machine, in contrast to the channel access gateways which often have multiple gateway processes per machine. In order to support this, the p4p gateway has good “client” and “server” options which allow specifying multiple gateway servers within the same process.</p>
<p>The <a class="reference external" href="https://mdavidsaver.github.io/p4p/gw.html#quick-start"><code class="docutils literal notranslate"><span class="pre">p4p</span></code> gateway documentation online</a> is generally quite good.</p>
<section id="instrument-gateway-setup">
<h2>Instrument gateway setup<a class="headerlink" href="#instrument-gateway-setup" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The gateway is started by <code class="docutils literal notranslate"><span class="pre">C:\Instrument\Apps\EPICS\gateway\start_pva_gw.bat</span></code> (called by <code class="docutils literal notranslate"><span class="pre">start_gateways.bat</span></code>)</p></li>
<li><p>A script called <code class="docutils literal notranslate"><span class="pre">generate_p4p_config.py</span></code> dynamically generates a <code class="docutils literal notranslate"><span class="pre">p4p</span></code> config file, based on the current machine’s network settings, and writes it to <code class="docutils literal notranslate"><span class="pre">C:\Instrument\Var\tmp\p4p_config.json</span></code> just before the gateway starts.</p></li>
<li><p>PVAccess address lists are set in <code class="docutils literal notranslate"><span class="pre">config_env_base.bat</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">p4p</span></code> gateway logs to <code class="docutils literal notranslate"><span class="pre">C:\Instrument\Var\logs\gateway\pva</span></code></p></li>
</ul>
</section>
<section id="access-security">
<h2>Access security<a class="headerlink" href="#access-security" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">p4p</span></code> is currently unable to parse our <code class="docutils literal notranslate"><span class="pre">.acf</span></code> file for access security. Therefore, the gateway has been set to be globally read-only instead.</p>
<p>In practice this limitation is unlikely to be relevant - the obvious use cases for PVAccess (e.g. areadetector arrays) are primarily read-only anyway.</p>
</section>
<section id="block-gateway">
<h2>Block gateway<a class="headerlink" href="#block-gateway" title="Link to this heading"></a></h2>
<p>Under channel access, we use a block gateway to alias underlying PVs into blocks.</p>
<p>A PVAccess block gateway should be possible, but most of our block infrastructure does not currently support PVAccess anyway (e.g. archiving, <code class="docutils literal notranslate"><span class="pre">g.cget</span></code>, GUI blocks view, …).</p>
</section>
<section id="site-gateways">
<h2>Site gateways<a class="headerlink" href="#site-gateways" title="Link to this heading"></a></h2>
<p>Site PVAccess gateways, which would allow access between the r55, r80, r3 subnets are not currently available. They will be added in <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/8419">#8419</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nicos/Testing-Nicos.html" class="btn btn-neutral float-left" title="Testing Nicos" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Python.html" class="btn btn-neutral float-right" title="Python (including Uktena, uv)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>