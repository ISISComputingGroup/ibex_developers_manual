

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DETMON &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="EMMA" href="EMMA-Instrument-Details.html" />
    <link rel="prev" title="CRISP" href="CRISP-Instrument-Details.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Systems.html">Systems Administration &amp; Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tools.html">Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Processes.html">Processes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Admin.html">Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Continuous-Integration.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Decision-Log.html">Decision Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Dev-Processes.html">Developer Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Git-and-GitHub.html">Git and Github</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../Instrument-Details.html">Instrument Migration Notes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ALF-Instrument-Details.html">ALF</a></li>
<li class="toctree-l3"><a class="reference internal" href="ARGUS-Instrument-Details.html">ARGUS</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHIPIR-Instrument-Details.html">CHIPIR</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHRONUS-Instrument-Details.html">CHRONUS</a></li>
<li class="toctree-l3"><a class="reference internal" href="CRISP-Instrument-Details.html">CRISP</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DETMON</a></li>
<li class="toctree-l3"><a class="reference internal" href="EMMA-Instrument-Details.html">EMMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="EMU-Instrument-Details.html">EMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="ENGIN-X-Instrument-Details.html">ENGIN-X</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEM-Instrument-Details.html">GEM</a></li>
<li class="toctree-l3"><a class="reference internal" href="HIFI-Instrument-Details.html">HIFI</a></li>
<li class="toctree-l3"><a class="reference internal" href="HIFI_CRYOMAG-Instrument-Details.html">HIFI-CRYOMAG</a></li>
<li class="toctree-l3"><a class="reference internal" href="HRPD-Instrument-Details.html">HRPD</a></li>
<li class="toctree-l3"><a class="reference internal" href="IMAT-Instrument-Details.html">IMAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="INES-Instrument-Details.html">INES</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTER-Instrument-Details.html">INTER</a></li>
<li class="toctree-l3"><a class="reference internal" href="IRIS-Instrument-Details.html">IRIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="LARMOR-Instrument-Details.html">LARMOR</a></li>
<li class="toctree-l3"><a class="reference internal" href="LET-Instrument-Details.html">LET</a></li>
<li class="toctree-l3"><a class="reference internal" href="LOQ-Instrument-Details.html">LOQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="MAPS-Instrument-Details.html">MAPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="MARI-Instrument-Details.html">MARI</a></li>
<li class="toctree-l3"><a class="reference internal" href="MERLIN-Instrument-Details.html">MERLIN</a></li>
<li class="toctree-l3"><a class="reference internal" href="MUON-Front-End-Instrument-Details.html">MUONFE</a></li>
<li class="toctree-l3"><a class="reference internal" href="MUSR-Instrument-Details.html">MUSR</a></li>
<li class="toctree-l3"><a class="reference internal" href="MUX-Instrument-Details.html">MUX</a></li>
<li class="toctree-l3"><a class="reference internal" href="NIMROD-Instrument-Details.html">NIMROD</a></li>
<li class="toctree-l3"><a class="reference internal" href="OFFSPEC-Instrument-Details.html">OFFSPEC</a></li>
<li class="toctree-l3"><a class="reference internal" href="OSIRIS-Instrument-Details.html">OSIRIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="PEARL-Instrument-Details.html">PEARL</a></li>
<li class="toctree-l3"><a class="reference internal" href="POLARIS-Instrument-Details.html">POLARIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="POLREF-Instrument-Details.html">POLREF</a></li>
<li class="toctree-l3"><a class="reference internal" href="RIKEN-Front-End-Instrument-Details.html">RIKENFE</a></li>
<li class="toctree-l3"><a class="reference internal" href="SANDALS-Instrument-Details.html">SANDALS</a></li>
<li class="toctree-l3"><a class="reference internal" href="SANS2D-Instrument-Details.html">SANS2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="SURF-Instrument-Details.html">SURF</a></li>
<li class="toctree-l3"><a class="reference internal" href="SXD-Instrument-Details.html">SXD</a></li>
<li class="toctree-l3"><a class="reference internal" href="TOSCA-Instrument-Details.html">TOSCA</a></li>
<li class="toctree-l3"><a class="reference internal" href="VESUVIO-Instrument-Details.html">VESUVIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="WISH-Instrument-Details.html">WISH</a></li>
<li class="toctree-l3"><a class="reference internal" href="ZOOM-Instrument-Details.html">ZOOM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Meetings.html">Meetings - internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Meetings-with-Scientists.html">Meetings - with scientists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Pm.html">Project Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Retrospective-Notes.html">Retrospective Notes</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Processes.html">Processes</a></li>
          <li class="breadcrumb-item"><a href="../Instrument-Details.html">Instrument Migration Notes</a></li>
      <li class="breadcrumb-item active">DETMON</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/processes/instrument_details/DETMON-Instrument-Details.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="detmon">
<h1>DETMON<a class="headerlink" href="#detmon" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These instrument details pages provide historical context about the devices on a specific instrument,
at the time they were migrated to IBEX. <strong>These pages may not be up to date with the latest instrument
configuration.</strong></p>
</div>
<section id="background-timeline">
<h2>Background &amp; Timeline<a class="headerlink" href="#background-timeline" title="Link to this heading"></a></h2>
<p>DETMON is a support system for use by the detector teams to monitor and view the status of the HV (High Voltage) crates that are in use across ISIS.
A pilot system should be created before Cycle 2019-01, the final system does not at present have a dead line.</p>
</section>
<section id="equipment">
<h2>Equipment<a class="headerlink" href="#equipment" title="Link to this heading"></a></h2>
<p>The only equipment to consider for this system are CAEN crates (types of HV crate), however, there are about 30+ of them to consider.</p>
</section>
<section id="system-requirements">
<h2>System Requirements<a class="headerlink" href="#system-requirements" title="Link to this heading"></a></h2>
<section id="monitoring">
<h3>Monitoring<a class="headerlink" href="#monitoring" title="Link to this heading"></a></h3>
<p>The following items need to be monitored for each part of the system:</p>
<section id="crates">
<h4>Crates<a class="headerlink" href="#crates" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Variable</p></th>
<th class="head"><p>What to record</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ON/OFF available in network</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ConnStatus</span></code></p></td>
<td><p>Any variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-odd"><td><p>Crate fan status</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HVFanStat</span></code></p></td>
<td><p>Any variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td><p>Crate fan speed</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HVFanSpeed</span></code></p></td>
<td><p>Any variation &gt;+-5%</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-odd"><td><p>Which slots are used in the crate</p></td>
<td><p></p></td>
<td><p>Any variation</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Model Name</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ModelName</span></code></p></td>
<td><p>Any variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-odd"><td><p>Software Release</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SwRelease</span></code></p></td>
<td><p>Any variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td><p>Power Supply Status</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HvPwSM</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-odd"><td><p>IP address</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">IPAddr</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td><p>Boards slots</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Slots</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Integer</p></td>
</tr>
<tr class="row-odd"><td><p>CPU Load</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CPULoad</span></code></p></td>
<td><p>Any Variation&gt;=+-???</p></td>
<td><p>Integer</p></td>
</tr>
<tr class="row-even"><td><p>Commands in the queue</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CmdQueueStatus</span></code></p></td>
<td><p>Any Variation&gt;=+-???</p></td>
<td><p>Integer</p></td>
</tr>
<tr class="row-odd"><td><p>Memory Status</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MemoryStatus</span></code></p></td>
<td><p>Any Variation &gt;=+-???</p></td>
<td><p>Integer</p></td>
</tr>
</tbody>
</table>
</section>
<section id="boards">
<h4>Boards<a class="headerlink" href="#boards" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Variable</p></th>
<th class="head"><p>What to record</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Model</p></td>
<td><p>Model</p></td>
<td><p>Any Variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-odd"><td><p>Firmware release</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Fmw</span> <span class="pre">Release</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-even"><td><p>Serial Number</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SerNum</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Integer</p></td>
</tr>
<tr class="row-odd"><td><p>Number of Channels</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NrOfCh</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Integer</p></td>
</tr>
<tr class="row-even"><td><p>Temperature</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Temp</span></code></p></td>
<td><p>Any variation &gt;= +-1 deg C</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>Max Voltage</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HVMax</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>Board Status</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BdStatus</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Integer</p></td>
</tr>
</tbody>
</table>
</section>
<section id="channels">
<h4>Channels<a class="headerlink" href="#channels" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Variable</p></th>
<th class="head"><p>What to record</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Channel Name</p></td>
<td><p>Name</p></td>
<td><p>Any Variation</p></td>
<td><p>String</p></td>
</tr>
<tr class="row-odd"><td><p>Voltage Setting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">V0Set</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>Current Setting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">I0Set</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>Voltage1 Setting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">V1Set</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>Current1 Setting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">I1Set</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>Rump Up speed</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RUp</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>Rump Down speed</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RDWn</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>Trip time</p></td>
<td><p>Trip</p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>Max Voltage Software limit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SVMax</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>Monitor Voltage</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VMon</span></code></p></td>
<td><p>Any Variation &gt;= +-1 V</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>Monitor Current</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">IMon</span></code></p></td>
<td><p>Any Variation &gt;= +-2 uA</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>Status</p></td>
<td><p>Status</p></td>
<td><p>Any Variation</p></td>
<td><p>Integer</p></td>
</tr>
<tr class="row-even"><td><p>Power Down Mode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PDwn</span></code></p></td>
<td><p>Any Variation</p></td>
<td><p>Integer</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="notes-for-the-solution">
<h3>Notes for the solution<a class="headerlink" href="#notes-for-the-solution" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>This monitoring would be for every crate in use at ISIS, and for any offline/test crates as well. Note that a crate has many boards, and a board has many channels – in the test system available at time of writing there is 1 crate, 8 cards, and 23 channels per card</p></li>
<li><p>The IOC already deals with the channel requirements, although we may need to verify the trip</p></li>
<li><p>The boards and crates may need some work to add them</p></li>
<li><p>This monitoring also has to be independent of the instrument status or behaviour</p></li>
<li><p>The rate of capture for this information can be relatively slow (1 second per item)</p></li>
<li><p>It is quite possible to link multiple IOCs to the same crate</p></li>
<li><p>Recording data to nexus files is acceptable – as such by creating a large number of blocks we should be able to run a script that is based on time and uses dummy neutron data – the nexus files can be stored, and the data regarding behaviour used to provide long term information. The log plotter will provide short term information for the numeric values. A python script could start a run and end and restart at predetermined times/after certain durations</p></li>
<li><p>Whilst IBEX and NeXus files provide a solution, the data is being logged into a database, and longer term, either logging to a different database or forwarding the data that way may be more suitable – this should be explored mid-long term, but IBEX at least provided short term</p></li>
<li><p>The number of blocks would need to be created by scripting, and the majority should likely be hidden from use on IBEX.</p></li>
<li><p>The sheer number of blocks did raise a concern as to whether or not IBEX could deal with the numbers, as such some testing and proving will be needed</p>
<ul>
<li><p>to get an idea of the potential numbers of blocks, assume every instrument has one fully populated CAEN crate</p></li>
<li><p>if every channel is defined as a block (so that it can be recorded in a Nexus file), that’s</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">35</span> <span class="pre">x</span> <span class="pre">8</span> <span class="pre">x</span> <span class="pre">23</span></code> = <code class="docutils literal notranslate"><span class="pre">6440</span></code> blocks</p></li>
</ul>
</li>
<li><p>clearly <code class="docutils literal notranslate"><span class="pre">6440</span></code> blocks is an over-estimate, but it illustrates the scale of the problem</p></li>
</ul>
</li>
<li><p>Currently to tick over log files at midnight a cron job is used to end and begin a run</p></li>
</ul>
</section>
</section>
<section id="configuration-set-up">
<h2>Configuration set up<a class="headerlink" href="#configuration-set-up" title="Link to this heading"></a></h2>
<p>DETMON has a lot of blocks to set up and the CAEN crates create have a dynamic amount of boards and channels set up. This set up is scripted with scripts from the NDADETMON config area (in <code class="docutils literal notranslate"><span class="pre">Python/inst</span></code>). There are two scripts:</p>
<ol class="arabic simple">
<li><p>The script <code class="docutils literal notranslate"><span class="pre">record_channels.py</span></code> searches for the connected boards and channels for the crates (see the script help option for arguments to pass). The output is a JSON file containing information on the crate name, boards and channels.</p></li>
<li><p>Using this JSON file you can then create the relevant <code class="docutils literal notranslate"><span class="pre">blocks.xml</span></code>, <code class="docutils literal notranslate"><span class="pre">groups.xml</span></code>, <code class="docutils literal notranslate"><span class="pre">block_config.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">gwblock.pvlist</span></code> files using the <code class="docutils literal notranslate"><span class="pre">create_config_files_from_recorded_channels.py</span></code>. Once produced put them in the config area alongside the meta.xml and other configuration-specific files. In the meta.xml ensure that the <code class="docutils literal notranslate"><span class="pre">configuresBlockGWAndArchiver</span></code> tag is set to true and the blockserver will handle the use of the files you have created.</p></li>
</ol>
<p>This two step process lets you edit the intermediate JSON to include channels and crates which are not currently on the network.</p>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>DETMON runs the block gateway and block archiver with customised <code class="docutils literal notranslate"><span class="pre">gwblock.pvlist</span></code> and <code class="docutils literal notranslate"><span class="pre">block_config.xml</span></code> files to tackle handling the high number of blocks that we require on IBEX. See ticket <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5069">https://github.com/ISISComputingGroup/IBEX/issues/5069</a>.</p></li>
</ul>
</section>
<section id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The number of blocks is so high that they often timeout when getting them from the blockserver. We do not at the moment care too much as long as they are written correctly to the nexus file and Davide seems quite happy with that.</p>
<ul>
<li><p>Tackled in <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5069">https://github.com/ISISComputingGroup/IBEX/issues/5069</a> by using customised <code class="docutils literal notranslate"><span class="pre">gwblock.pvlist</span></code> and <code class="docutils literal notranslate"><span class="pre">block_config.xml</span></code> files</p></li>
<li><p>Possible future performance upgrade in <a class="reference external" href="https://github.com/ISISComputingGroup/IBEX/issues/5917">https://github.com/ISISComputingGroup/IBEX/issues/5917</a></p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="CRISP-Instrument-Details.html" class="btn btn-neutral float-left" title="CRISP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="EMMA-Instrument-Details.html" class="btn btn-neutral float-right" title="EMMA" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>