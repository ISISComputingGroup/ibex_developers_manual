

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Increase VM memory &mdash; IBEX Developer&#39;s Manual</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=e6a88b47" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MDT (Microsoft deployment toolkit)" href="MDT-%28Microsoft-deployment-toolkit%29.html" />
    <link rel="prev" title="Data Storage &amp; Production" href="Data-Generation-and-Storage-on-Instrument-PCs-%28NDX%27s%29.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../../index.html" class="icon icon-home">
            IBEX Developer's Manual
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Editing-the-Wiki.html">Editing this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Interfaces &amp; Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Client.html">IBEX GUI (Eclipse)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Scripting.html">Scripting (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Web.html">Web Dashboard &amp; Chat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IBEX Server &amp; Systems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../System-components.html">Backend System Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../IOCs.html">EPICS IOCs &amp; Support Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Specific-IOCs.html">Specific Devices &amp; IOCs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Systems.html">Systems Administration &amp; Hardware</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../External.html">External systems/services</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../Inst-Control.html">Instrument control computers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Archive-Watcher.html">Archive Watcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="Automated-log-rotation.html">Automated log rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Change-Windows-Theme.html">Change Windows Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="Computer-Troubleshooting.html">Computer Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="Data-Generation-and-Storage-on-Instrument-PCs-%28NDX%27s%29.html">Data Storage &amp; Production</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Increase VM memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="MDT-%28Microsoft-deployment-toolkit%29.html">MDT (Microsoft deployment toolkit)</a></li>
<li class="toctree-l3"><a class="reference internal" href="PS-Remote.html">Powershell Remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="Rebuild-Performance-Counters.html">Rebuild Performance Counters</a></li>
<li class="toctree-l3"><a class="reference internal" href="Script-to-connect-to-all-instruments.html">Script to connect to all instruments</a></li>
<li class="toctree-l3"><a class="reference internal" href="TreeSize-Pro.html">TreeSize</a></li>
<li class="toctree-l3"><a class="reference internal" href="VM-VHD-replication.html">VM VHD Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="cron-jobs-and-windows-scheduled-tasks.html">Cron Jobs &amp; Scheduled Tasks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../MinimumSpecs.html">Minimum machine specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Nagios.html">Nagios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Shadow.html">Shadow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sparrowhawk.html">Sparrowhawk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Test-Machines.html">Test Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Webserver.html">Webserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control-svcs.html"><code class="docutils literal notranslate"><span class="pre">control-svcs</span></code></a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Processes &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Providing-Support.html">Providing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Deployment.html">Releases &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Processes.html">Processes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IBEX Developer's Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Systems.html">Systems Administration &amp; Hardware</a></li>
          <li class="breadcrumb-item"><a href="../Inst-Control.html">Instrument control computers</a></li>
      <li class="breadcrumb-item active">Increase VM memory</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_developers_manual/blob/master/doc/systems/inst_control/Increase-VM-memory.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="increase-vm-memory">
<h1>Increase VM memory<a class="headerlink" href="#increase-vm-memory" title="Link to this heading"></a></h1>
<section id="increasing-guest-vm-memory-to-14gb-using-ndhdetect-as-an-example">
<h2>Increasing guest VM memory to 14GB (using <code class="docutils literal notranslate"><span class="pre">NDHDETECT</span></code> as an example).<a class="headerlink" href="#increasing-guest-vm-memory-to-14gb-using-ndhdetect-as-an-example" title="Link to this heading"></a></h2>
<p>The basic steps are as below:</p>
<ol class="arabic simple">
<li><p>log onto the server (via the local Administrator account).</p></li>
<li><p>Check that there will still be a minimum of at least 20GB free space on the server C: drive after the increase.</p></li>
<li><p>Shut down the VM (<code class="docutils literal notranslate"><span class="pre">NDXDETECT1</span></code> in this case).</p></li>
<li><p>Change the startup/maximum memory setting for the VM in Hyper-V manager to 14GB.</p></li>
<li><p>Restart the VM and check that the memory has indeed increased (and that all still works).</p></li>
</ol>
</section>
<section id="log-onto-the-server">
<h2>Log onto the server<a class="headerlink" href="#log-onto-the-server" title="Link to this heading"></a></h2>
<p>All administration of the Hyper-V system and system settings should be done from the local “Administrator” account for the server (NDH machine), in this case this would be <code class="docutils literal notranslate"><span class="pre">NDHDETECT\Administrator</span></code>.  The password is in the usual place and the remote desktop log on should be done explicitly via the below command to ensure that the log on is not to another account by explicitly asking for a prompt. i.e.</p>
<p><code class="docutils literal notranslate"><span class="pre">mstsc</span> <span class="pre">/v:ndhdetect</span> <span class="pre">/admin</span> <span class="pre">/prompt</span></code></p>
<p>the <code class="docutils literal notranslate"><span class="pre">/admin</span></code> should ideally be used as it is possible to have more than one concurrent log on on a server and it is always good to be able to get back to the same session (there is only one /admin session).</p>
</section>
<section id="check-there-will-be-sufficient-free-disk-space-on-the-c-drive-of-the-instrument-server">
<h2>Check there will be sufficient free disk space on the C: Drive of the instrument server<a class="headerlink" href="#check-there-will-be-sufficient-free-disk-space-on-the-c-drive-of-the-instrument-server" title="Link to this heading"></a></h2>
<p>The space taken by the running VM on the NDH machine’s C: drive will be increased by the amount of extra memory allocated to the machine.  So, for example if the machine was 8GB going to 14GB it will take up another 6GB on the system drive.  Ensure that the expansion will not take the free space on the C: drive below the minimum of 20GB.</p>
<p>The running VM memory size can be seen from Hyper-V manager.  Start this by clicking on
<img alt="" src="../../_images/vm-memory-hyper-v-icon.png" /> on the toolbar.</p>
</section>
<section id="shut-down-the-vm-to-be-modified-ndxdetect1">
<h2>Shut down the VM to be modified (NDXDETECT1)<a class="headerlink" href="#shut-down-the-vm-to-be-modified-ndxdetect1" title="Link to this heading"></a></h2>
<p>Normally there will only be one NDX VM running but in this example there are actually two, we will only increase the memory size for the first one.  On the Hyper-V manager window, right click on the VM and select <code class="docutils literal notranslate"><span class="pre">Connect...</span></code> as shown (or double click). This will open a console window on NDXDETECT1.</p>
<p><img alt="" src="../../_images/vm-memory-connect-to-vm.png" /></p>
<p>If necessary log on to the instrument as <code class="docutils literal notranslate"><span class="pre">.\spudulike</span></code>, password as normal.  Open a console (<code class="docutils literal notranslate"><span class="pre">Command</span> <span class="pre">Prompt</span></code>) window and type</p>
<p><code class="docutils literal notranslate"><span class="pre">shutdown</span> <span class="pre">/f</span> <span class="pre">/s</span> <span class="pre">/t</span> <span class="pre">0</span></code></p>
<p>Wait for the machine to shut down (which it definitely will with no intervention needed), the <code class="docutils literal notranslate"><span class="pre">/f</span></code> forces shutdown regardless of any questions from applications.</p>
<p>If you normally use <code class="docutils literal notranslate"><span class="pre">Start-&gt;Run...</span></code> to run commands, please type “cmd” and create a fresh command window, don’t run the forced shutdown command directly, it will be remembered as the last <code class="docutils literal notranslate"><span class="pre">Run...</span></code> command and makes it too easy for a user to accidentally shut down their machine permanently!</p>
</section>
<section id="change-the-startup-maximum-memory-setting-for-the-vm-in-hyper-v-manager-to-14gb">
<h2>Change the startup/maximum memory setting for the VM in Hyper-V manager to 14GB<a class="headerlink" href="#change-the-startup-maximum-memory-setting-for-the-vm-in-hyper-v-manager-to-14gb" title="Link to this heading"></a></h2>
<p>When the machine has shut down, right click again in Hyper-V manager as before, but this time select <code class="docutils literal notranslate"><span class="pre">Settings...</span></code> The dialogue shown below will appear.</p>
<p><img alt="" src="../../_images/vm-memory-change-memory.png" /></p>
<p>Navigate to expand the “Processor” settings and select “NUMA”.  Click once on the “Use Hardware Topology”
<img alt="" src="../../_images/vm-memory-use-hardware-topology.png" />
button.  The numbers above may change a bit (but likely will not), in either case, select the “Maximum amount of Memory” and copy the figure here.  On the “Hardware” pane on left hand side, select “Memory.” Paste the figure you just copied into the box for “Startup RAM:” and click <code class="docutils literal notranslate"><span class="pre">Apply</span></code>.   As long as this completes without error the job is done.  Close the window, right click as before on the VM but this time choose <code class="docutils literal notranslate"><span class="pre">Start</span></code>.  Check that the system boots OK, the console window will show the boot process.  Ensure that the system is running as it should.  You can check in task manager (on the performance tab) to see that the physical memory has now expanded.</p>
</section>
<section id="endnote">
<h2>Endnote<a class="headerlink" href="#endnote" title="Link to this heading"></a></h2>
<p>As the detector testing system is an unusual setup these two virtual machines must share their resources and are both equally important so despite what was shown here, these are now both set to the small IBEX machine minimum of 8GB each with 3.5GB allowed for the server system, i.e. 8GB+8GB+3.5GB which adds up to 19.5GB.  If one of the four 8GB DIMMS in the host were to fail, there would be (32-8)GB left i.e. 24GB which would still permit the two machines to continue to function optimally (despite some risk of a crash and reboot if the failing DIMM corrupted memory which was in use).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Data-Generation-and-Storage-on-Instrument-PCs-%28NDX%27s%29.html" class="btn btn-neutral float-left" title="Data Storage &amp; Production" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="MDT-%28Microsoft-deployment-toolkit%29.html" class="btn btn-neutral float-right" title="MDT (Microsoft deployment toolkit)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>